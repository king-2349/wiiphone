(this.webpackJsonpwiiphoneui=this.webpackJsonpwiiphoneui||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var o=n(1),s=n(7),c=n.n(s),i=(n(16),n(5),n(4)),r=n(3),a=n(2),u=n(0);function l(e){return Object(u.jsx)("div",{className:"controllerButton "+(e.pressed?"controllerButtonActive ":"")+(e.round?"controllerButtonRound ":""),onTouchStart:function(){e.buttonPressed()},onTouchMove:function(){e.buttonPressed()},onTouchEnd:function(){e.buttonReleased()},onTouchCancel:function(){e.buttonReleased()},children:e.buttonDisplay})}function b(){var e=Object(o.useState)({timestamp:Date.now(),Recenter:0,A:0,B:0,AB:0,One:0,Two:0,Minus:0,Plus:0,Home:0,Up:0,Down:0,Left:0,Right:0,acceleration:{x:0,y:0,z:0},rotation:{alpha:0,beta:0,gamma:0}}),t=Object(a.a)(e,2),n=t[0],s=t[1],c=Object(o.useState)(!1),b=Object(a.a)(c,2),d=b[0],j=b[1],p=Object(o.useState)(null),f=Object(a.a)(p,2),O=f[0],m=f[1],v=Object(o.useState)(!1),h=Object(a.a)(v,2),R=h[0],x=h[1],w=Object(o.useState)("N/A"),y=Object(a.a)(w,2),D=y[0],P=y[1];function g(e,t){s((function(n){return Object(r.a)(Object(r.a)({},n),{},Object(i.a)({},e,t))}))}return Object(o.useEffect)((function(){var e=window.location.href,t="wss://".concat(e.match(/^https?:\/\/([^:]+).+$/)[1],":1338"),n=new WebSocket(t);m(n),n.onopen=function(e){j(!0)},n.onmessage=function(e){P(e.data)}}),[]),Object(o.useEffect)((function(){function e(){d&&O.send(JSON.stringify(n))}e();var t=setInterval((function(){e()}),16);return function(){return clearInterval(t)}}),[n,O,d]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("div",{className:"infoWrapper",children:[Object(u.jsxs)("div",{children:["Connected: ",d.toString(),", Motion Enabled: ",R.toString()]}),Object(u.jsxs)("div",{children:["Controller Slot: ",D.toString()]}),Object(u.jsx)("button",{onClick:function(){null!=DeviceMotionEvent&&(null!=DeviceMotionEvent.requestPermission&&"function"===typeof DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission():new Promise((function(e){return e("granted")}))).then((function(e){"granted"===e&&(x(!0),window.addEventListener("devicemotion",(function(e){s((function(t){return Object(r.a)(Object(r.a)({},t),{},{timestamp:Date.now(),acceleration:{x:(0*t.acceleration.x+1*e.accelerationIncludingGravity.x)/9.8,y:(0*t.acceleration.z+1*e.accelerationIncludingGravity.z)/9.8,z:-(0*t.acceleration.y+1*e.accelerationIncludingGravity.y)/9.8},rotation:{alpha:0*t.rotation.alpha+1*e.rotationRate.alpha,beta:-(0*t.rotation.gamma+1*e.rotationRate.gamma),gamma:0*t.rotation.beta+1*e.rotationRate.beta}})}))})))}))},children:"Give Motion Control Permission"})]}),Object(u.jsxs)("div",{className:"controllerWrapper",children:[Object(u.jsx)("div",{className:"controllerRowWrapper",children:Object(u.jsx)(l,{buttonDisplay:"^",pressed:1===n.Up,buttonPressed:function(){g("Up",1)},buttonReleased:function(){g("Up",0)}})}),Object(u.jsxs)("div",{className:"controllerRowWrapper",children:[Object(u.jsx)(l,{buttonDisplay:"<",pressed:1===n.Left,buttonPressed:function(){g("Left",1)},buttonReleased:function(){g("Left",0)}}),Object(u.jsx)(l,{buttonDisplay:">",pressed:1===n.Right,buttonPressed:function(){g("Right",1)},buttonReleased:function(){g("Right",0)}})]}),Object(u.jsx)("div",{className:"controllerRowWrapper",children:Object(u.jsx)(l,{buttonDisplay:"v",pressed:1===n.Down,buttonPressed:function(){g("Down",1)},buttonReleased:function(){g("Down",0)}})}),Object(u.jsxs)("div",{className:"controllerRowWrapper",children:[Object(u.jsx)(l,{round:!0,buttonDisplay:"A",pressed:1===n.A||1===n.AB,buttonPressed:function(){g("A",1)},buttonReleased:function(){g("A",0)}}),Object(u.jsx)(l,{buttonDisplay:"B",pressed:1===n.B||1===n.AB,buttonPressed:function(){g("B",1)},buttonReleased:function(){g("B",0)}})]}),Object(u.jsxs)("div",{className:"controllerRowWrapper",children:[Object(u.jsx)(l,{buttonDisplay:"Center",pressed:1===n.Recenter,buttonPressed:function(){g("Recenter",1)},buttonReleased:function(){g("Recenter",0)}}),Object(u.jsx)(l,{buttonDisplay:"A/B",pressed:1===n.AB||1===n.A&&1===n.B,buttonPressed:function(){g("AB",1)},buttonReleased:function(){g("AB",0)}})]}),Object(u.jsxs)("div",{className:"controllerRowWrapper",children:[Object(u.jsx)(l,{round:!0,buttonDisplay:"-",pressed:1===n.Minus,buttonPressed:function(){g("Minus",1)},buttonReleased:function(){g("Minus",0)}}),Object(u.jsx)(l,{round:!0,buttonDisplay:"Home",pressed:1===n.Home,buttonPressed:function(){g("Home",1)},buttonReleased:function(){g("Home",0)}}),Object(u.jsx)(l,{round:!0,buttonDisplay:"+",pressed:1===n.Plus,buttonPressed:function(){g("Plus",1)},buttonReleased:function(){g("Plus",0)}})]}),Object(u.jsx)("div",{className:"controllerRowWrapper",children:Object(u.jsx)(l,{round:!0,buttonDisplay:"1",pressed:1===n.One,buttonPressed:function(){g("One",1)},buttonReleased:function(){g("One",0)}})}),Object(u.jsx)("div",{className:"controllerRowWrapper",children:Object(u.jsx)(l,{round:!0,buttonDisplay:"2",pressed:1===n.Two,buttonPressed:function(){g("Two",1)},buttonReleased:function(){g("Two",0)}})})]})]})}c.a.createRoot(document.getElementById("root")).render(Object(u.jsx)(b,{}))},5:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.422940a3.chunk.js.map